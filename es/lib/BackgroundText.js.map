{"version":3,"sources":["../../../src/lib/BackgroundText.js"],"names":["React","PropTypes","PureComponent","hexToRGBA","isDefined","BackgroundText","context","chartCanvasType","getCanvasContexts","contexts","drawOnCanvas","bg","props","children","componentDidMount","x","y","fill","opacity","stroke","strokeOpacity","fontFamily","fontSize","textAnchor","ctx","getText","interval","clearRect","canvas","width","height","save","setTransform","translate","text","strokeStyle","font","fillStyle","textAlign","strokeText","fillText","restore","propTypes","number","isRequired","string","func","defaultProps","contextTypes"],"mappings":"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","file":"BackgroundText.js","sourcesContent":["import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport PureComponent from \"./utils/PureComponent\";\n\nimport { hexToRGBA, isDefined } from \"./utils\";\n\nclass BackgroundText extends PureComponent {\n\tcomponentDidMount() {\n\t\tif (this.context.chartCanvasType !== \"svg\" && isDefined(this.context.getCanvasContexts)) {\n\t\t\tconst contexts = this.context.getCanvasContexts();\n\t\t\tif (contexts) BackgroundText.drawOnCanvas(contexts.bg, this.props, this.context, this.props.children);\n\t\t}\n\t}\n\tcomponentDidUpdate() {\n\t\tthis.componentDidMount();\n\t}\n\trender() {\n\t\tconst { chartCanvasType } = this.context;\n\n\t\tif (chartCanvasType !== \"svg\") return null;\n\n\t\tconst { x, y, fill, opacity, stroke, strokeOpacity, fontFamily, fontSize, textAnchor } = this.props;\n\t\tconst props = { x, y, fill, opacity, stroke, strokeOpacity, fontFamily, fontSize, textAnchor };\n\t\treturn (\n\t\t\t<text {...props}>this.props.children(interval)</text>\n\t\t);\n\t}\n}\n\nBackgroundText.drawOnCanvas = (ctx, props, { interval }, getText) => {\n\tctx.clearRect(-1, -1, ctx.canvas.width + 2, ctx.canvas.height + 2);\n\tctx.save();\n\n\tctx.setTransform(1, 0, 0, 1, 0, 0);\n\tctx.translate(0.5, 0.5);\n\n\tconst { x, y, fill, opacity, stroke, strokeOpacity, fontFamily, fontSize, textAnchor } = props;\n\n\tconst text = getText(interval);\n\n\tctx.strokeStyle = hexToRGBA(stroke, strokeOpacity);\n\n\tctx.font = `${ fontSize }px ${ fontFamily }`;\n\tctx.fillStyle = hexToRGBA(fill, opacity);\n\tctx.textAlign = textAnchor === \"middle\" ? \"center\" : textAnchor;\n\n\tif (stroke !== \"none\") ctx.strokeText(text, x, y);\n\tctx.fillText(text, x, y);\n\n\tctx.restore();\n};\n\nBackgroundText.propTypes = {\n\tx: PropTypes.number.isRequired,\n\ty: PropTypes.number.isRequired,\n\tfontFamily: PropTypes.string,\n\tfontSize: PropTypes.number.isRequired,\n\tfill: PropTypes.string,\n\tstroke: PropTypes.string,\n\topacity: PropTypes.number,\n\tstrokeOpacity: PropTypes.number,\n\ttextAnchor: PropTypes.string,\n\tchildren: PropTypes.func,\n};\n\nBackgroundText.defaultProps = {\n\topacity: 0.3,\n\tfill: \"#9E7523\",\n\tstroke: \"#9E7523\",\n\tstrokeOpacity: 1,\n\tfontFamily: \"Helvetica Neue, Helvetica, Arial, sans-serif\",\n\tfontSize: 12,\n\ttextAnchor: \"middle\",\n};\n\nBackgroundText.contextTypes = {\n\tinterval: PropTypes.string.isRequired,\n\tgetCanvasContexts: PropTypes.func,\n\tchartCanvasType: PropTypes.string,\n};\n\nexport default BackgroundText;"]}