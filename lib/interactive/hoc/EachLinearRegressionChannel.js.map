{"version":3,"sources":["../../../../src/lib/interactive/hoc/EachLinearRegressionChannel.js"],"names":["getNewXY","EachLinearRegressionChannel","props","handleEdge1Drag","bind","handleEdge2Drag","handleHover","isHover","saveNodeType","nodes","state","hover","moreProps","index","onDrag","snapTo","x2Value","x1Value","hovering","setState","appearance","edgeInteractiveCursor","hoverText","interactive","selected","onDragComplete","stroke","strokeWidth","strokeOpacity","fill","fillOpacity","r","edgeStrokeWidth","edgeFill","edgeStroke","hoverHandler","onHover","onUnHover","hoverTextEnabled","enable","restHoverTextProps","xScale","xAccessor","plotData","mouseXY","currentItem","x","y","propTypes","defaultClassName","string","any","isRequired","number","shape","func","bool","object","defaultProps","bgHeight","bgWidth","text"],"mappings":"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","file":"EachLinearRegressionChannel.js","sourcesContent":["import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport { noop } from \"../../utils\";\nimport { getCurrentItem } from \"../../utils/ChartDataUtil\";\nimport { saveNodeType, isHover } from \"../utils\";\n\nimport HoverTextNearMouse from \"../components/HoverTextNearMouse\";\nimport {\n\tdefault as LinearRegressionChannelWithArea,\n\tedge1Provider,\n\tedge2Provider\n} from \"../components/LinearRegressionChannelWithArea\";\n\nimport ClickableCircle from \"../components/ClickableCircle\";\n\nclass EachLinearRegressionChannel extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\n\t\tthis.handleEdge1Drag = this.handleEdge1Drag.bind(this);\n\t\tthis.handleEdge2Drag = this.handleEdge2Drag.bind(this);\n\n\t\tthis.handleHover = this.handleHover.bind(this);\n\n\t\tthis.isHover = isHover.bind(this);\n\t\tthis.saveNodeType = saveNodeType.bind(this);\n\t\tthis.nodes = {};\n\n\t\tthis.state = {\n\t\t\thover: false,\n\t\t};\n\t}\n\thandleEdge1Drag(moreProps) {\n\t\tconst { index, onDrag, snapTo } = this.props;\n\t\tconst {\n\t\t\tx2Value,\n\t\t} = this.props;\n\n\t\tconst [x1Value] = getNewXY(moreProps, snapTo);\n\n\t\tonDrag(index, {\n\t\t\tx1Value,\n\t\t\tx2Value,\n\t\t});\n\t}\n\thandleEdge2Drag(moreProps) {\n\t\tconst { index, onDrag, snapTo } = this.props;\n\t\tconst {\n\t\t\tx1Value,\n\t\t} = this.props;\n\n\t\tconst [x2Value] = getNewXY(moreProps, snapTo);\n\n\t\tonDrag(index, {\n\t\t\tx1Value,\n\t\t\tx2Value,\n\t\t});\n\t}\n\thandleHover(moreProps) {\n\t\tif (this.state.hover !== moreProps.hovering) {\n\t\t\tthis.setState({\n\t\t\t\thover: moreProps.hovering\n\t\t\t});\n\t\t}\n\t}\n\trender() {\n\t\tconst {\n\t\t\tx1Value,\n\t\t\tx2Value,\n\t\t\tappearance,\n\t\t\tedgeInteractiveCursor,\n\t\t\thoverText,\n\t\t\tinteractive,\n\t\t\tselected,\n\t\t\tonDragComplete,\n\t\t} = this.props;\n\t\tconst {\n\t\t\tstroke,\n\t\t\tstrokeWidth,\n\t\t\tstrokeOpacity,\n\t\t\tfill,\n\t\t\tfillOpacity,\n\t\t\tr,\n\t\t\tedgeStrokeWidth,\n\t\t\tedgeFill,\n\t\t\tedgeStroke,\n\t\t} = appearance;\n\t\tconst { hover } = this.state;\n\n\t\tconst hoverHandler = interactive\n\t\t\t? { onHover: this.handleHover, onUnHover: this.handleHover }\n\t\t\t: {};\n\t\tconst { enable: hoverTextEnabled, ...restHoverTextProps } = hoverText;\n\n\t\t// console.log(\"SELECTED ->\", selected);\n\t\treturn <g>\n\t\t\t<LinearRegressionChannelWithArea\n\t\t\t\tref={this.saveNodeType(\"area\")}\n\t\t\t\tselected={selected || hover}\n\t\t\t\t{...hoverHandler}\n\n\t\t\t\tx1Value={x1Value}\n\t\t\t\tx2Value={x2Value}\n\t\t\t\tfill={fill}\n\t\t\t\tstroke={stroke}\n\t\t\t\tstrokeWidth={(hover || selected) ? strokeWidth + 1 : strokeWidth}\n\t\t\t\tstrokeOpacity={strokeOpacity}\n\t\t\t\tfillOpacity={fillOpacity} />\n\t\t\t<ClickableCircle\n\t\t\t\tref={this.saveNodeType(\"edge1\")}\n\t\t\t\tshow={selected || hover}\n\t\t\t\txyProvider={edge1Provider(this.props)}\n\t\t\t\tr={r}\n\t\t\t\tfill={edgeFill}\n\t\t\t\tstroke={edgeStroke}\n\t\t\t\tstrokeWidth={edgeStrokeWidth}\n\t\t\t\tinteractiveCursorClass={edgeInteractiveCursor}\n\t\t\t\tonDrag={this.handleEdge1Drag}\n\t\t\t\tonDragComplete={onDragComplete} />\n\t\t\t<ClickableCircle\n\t\t\t\tref={this.saveNodeType(\"edge2\")}\n\t\t\t\tshow={selected || hover}\n\t\t\t\txyProvider={edge2Provider(this.props)}\n\t\t\t\tr={r}\n\t\t\t\tfill={edgeFill}\n\t\t\t\tstroke={edgeStroke}\n\t\t\t\tstrokeWidth={edgeStrokeWidth}\n\t\t\t\tinteractiveCursorClass={edgeInteractiveCursor}\n\t\t\t\tonDrag={this.handleEdge2Drag}\n\t\t\t\tonDragComplete={onDragComplete} />\n\t\t\t<HoverTextNearMouse\n\t\t\t\tshow={hoverTextEnabled && hover && !selected}\n\t\t\t\t{...restHoverTextProps} />\n\t\t</g>;\n\t}\n}\n\nexport function getNewXY(moreProps, snapTo) {\n\tconst { xScale, xAccessor, plotData, mouseXY } = moreProps;\n\n\tconst currentItem = getCurrentItem(xScale, xAccessor, mouseXY, plotData);\n\tconst x = xAccessor(currentItem);\n\tconst y = snapTo(currentItem);\n\n\treturn [x, y];\n}\n\nEachLinearRegressionChannel.propTypes = {\n\tdefaultClassName: PropTypes.string,\n\n\tx1Value: PropTypes.any.isRequired,\n\tx2Value: PropTypes.any.isRequired,\n\n\tindex: PropTypes.number,\n\n\tappearance: PropTypes.shape({\n\t\tstroke: PropTypes.string.isRequired,\n\t\tfillOpacity: PropTypes.number.isRequired,\n\t\tstrokeOpacity: PropTypes.number.isRequired,\n\t\tstrokeWidth: PropTypes.number.isRequired,\n\t\tfill: PropTypes.string.isRequired,\n\t\tedgeStrokeWidth: PropTypes.number.isRequired,\n\t\tedgeStroke: PropTypes.string.isRequired,\n\t\tedgeFill: PropTypes.string.isRequired,\n\t\tr: PropTypes.number.isRequired,\n\t}).isRequired,\n\n\tedgeInteractiveCursor: PropTypes.string,\n\tonDrag: PropTypes.func.isRequired,\n\tonDragComplete: PropTypes.func.isRequired,\n\tsnapTo: PropTypes.func,\n\tinteractive: PropTypes.bool.isRequired,\n\tselected: PropTypes.bool.isRequired,\n\n\thoverText: PropTypes.object.isRequired,\n};\n\nEachLinearRegressionChannel.defaultProps = {\n\tonDrag: noop,\n\tonDragComplete: noop,\n\n\tappearance: {\n\t\tstroke: \"#000000\",\n\t\tfillOpacity: 0.7,\n\t\tstrokeOpacity: 1,\n\t\tstrokeWidth: 1,\n\t\tfill: \"#8AAFE2\",\n\t\tedgeStrokeWidth: 2,\n\t\tedgeStroke: \"#000000\",\n\t\tedgeFill: \"#FFFFFF\",\n\t\tr: 5,\n\t},\n\tinteractive: true,\n\tselected: false,\n\thoverText: {\n\t\t...HoverTextNearMouse.defaultProps,\n\t\tenable: true,\n\t\tbgHeight: 18,\n\t\tbgWidth: 175,\n\t\ttext: \"Click and drag the edge circles\",\n\t}\n};\n\nexport default EachLinearRegressionChannel;"]}