{"version":3,"sources":["../../../src/lib/interactive/DrawingObjectSelector.js"],"names":["DrawingObjectSelector","props","handleClick","bind","handleDoubleClick","getInteraction","moreProps","e","console","log","preventDefault","onDoubleClick","enabled","interactives","selected","length","item","morePropsForChart","chartId","onSelect","getInteractiveNodes","drawingObjectMap","interactiveNodes","key","each","type","valueArray","node","undefined","valuePresent","Array","isArray","objects","getSelectionState","propTypes","func","isRequired","object","bool","defaultProps"],"mappings":"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","file":"DrawingObjectSelector.js","sourcesContent":["\"use strict\";\n\nimport React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport { isDefined, noop, mapObject, head } from \"../utils\";\nimport { getMorePropsForChart, getSelected } from \"./utils\";\n\nimport GenericComponent, { getMouseCanvas } from \"../GenericComponent\";\n\nclass DrawingObjectSelector extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.handleClick = this.handleClick.bind(this);\n\t\tthis.handleDoubleClick = this.handleDoubleClick.bind(this);\n\t\tthis.getInteraction = this.getInteraction.bind(this);\n\t}\n\thandleDoubleClick(moreProps, e) {\n\t\tconsole.log(\"Double Click\");\n\n\t\te.preventDefault();\n\t\tconst { onDoubleClick } = this.props;\n\t\tconst { enabled } = this.props;\n\t\tif (!enabled) return;\n\n\t\tconst interactives = this.getInteraction(moreProps);\n\t\tconst selected = getSelected(interactives);\n\n\t\t// console.log(selected, interactives)\n\t\tif (selected.length > 0) {\n\t\t\tconst item = head(selected);\n\t\t\tconst morePropsForChart = getMorePropsForChart(\n\t\t\t\tmoreProps, item.chartId\n\t\t\t);\n\t\t\tonDoubleClick(item, morePropsForChart);\n\t\t}\n\t}\n\thandleClick(moreProps, e) {\n\t\te.preventDefault();\n\t\tconst { onSelect } = this.props;\n\t\tconst { enabled } = this.props;\n\t\tif (!enabled) return;\n\n\t\tconst interactives = this.getInteraction(moreProps);\n\n\t\tonSelect(interactives, moreProps);\n\t}\n\tgetInteraction(moreProps) {\n\t\tconst { getInteractiveNodes, drawingObjectMap } = this.props;\n\t\tconst interactiveNodes = getInteractiveNodes();\n\t\tconst interactives = mapObject(interactiveNodes, each => {\n\t\t\tconst key = drawingObjectMap[each.type];\n\n\t\t\tconst valueArray = isDefined(key)\n\t\t\t\t? each.node.props[key]\n\t\t\t\t: undefined;\n\n\t\t\tconst valuePresent = isDefined(valueArray)\n\t\t\t\t&& Array.isArray(valueArray)\n\t\t\t\t&& valueArray.length > 0;\n\t\t\tif (valuePresent) {\n\t\t\t\t// console.log(\"Value present for \", each.type, each.chartId);\n\t\t\t\tconst morePropsForChart = getMorePropsForChart(\n\t\t\t\t\tmoreProps, each.chartId\n\t\t\t\t);\n\n\t\t\t\tconst objects = each.node.getSelectionState(morePropsForChart);\n\n\t\t\t\treturn {\n\t\t\t\t\ttype: each.type,\n\t\t\t\t\tchartId: each.chartId,\n\t\t\t\t\tobjects,\n\t\t\t\t};\n\t\t\t}\n\t\t\treturn {\n\t\t\t\ttype: each.type,\n\t\t\t\tchartId: each.chartId,\n\t\t\t\tobjects: [],\n\t\t\t};\n\t\t});\n\n\t\treturn interactives;\n\t}\n\n\trender() {\n\t\treturn (\n\t\t\t<GenericComponent\n\t\t\t\tsvgDraw={noop}\n\t\t\t\tcanvasToDraw={getMouseCanvas}\n\t\t\t\tcanvasDraw={noop}\n\n\t\t\t\tonMouseDown={this.handleClick}\n\t\t\t\tonDoubleClick={this.handleDoubleClick}\n\n\t\t\t\tdrawOn={[\"mousemove\", \"pan\", \"drag\"]}\n\t\t\t/>\n\t\t);\n\t}\n}\n\n\nDrawingObjectSelector.propTypes = {\n\tgetInteractiveNodes: PropTypes.func.isRequired,\n\tonSelect: PropTypes.func.isRequired,\n\tonDoubleClick: PropTypes.func.isRequired,\n\tdrawingObjectMap: PropTypes.object.isRequired,\n\tenabled: PropTypes.bool.isRequired,\n};\n\nDrawingObjectSelector.defaultProps = {\n\tenabled: true,\n\tonDoubleClick: noop,\n};\n\nexport default DrawingObjectSelector;\n"]}