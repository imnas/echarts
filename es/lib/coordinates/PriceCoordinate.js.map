{"version":3,"sources":["../../../../src/lib/coordinates/PriceCoordinate.js"],"names":["React","Component","PropTypes","drawOnCanvas","renderSVG","GenericChartComponent","getAxisCanvas","functor","PriceCoordinate","props","bind","ctx","moreProps","helper","propTypes","displayFormat","func","isRequired","yAxisPad","number","rectWidth","rectHeight","orient","oneOf","at","price","dx","arrowWidth","opacity","lineOpacity","lineStroke","string","fontFamily","fontSize","fill","oneOfType","textFill","defaultProps","width","yScale","chartConfig","domain","lowerYValue","upperYValue","x1","x2","edgeAt","type","y","show","coordinate","invert","hideLine","coordinateProps","y1","y2"],"mappings":"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","file":"PriceCoordinate.js","sourcesContent":["\"use strict\";\n\nimport React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport { drawOnCanvas, renderSVG } from \"./EdgeCoordinateV3\";\nimport GenericChartComponent from \"../GenericChartComponent\";\nimport { getAxisCanvas } from \"../GenericComponent\";\nimport { functor } from \"../utils\";\n\nclass PriceCoordinate extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.renderSVG = this.renderSVG.bind(this);\n\t\tthis.drawOnCanvas = this.drawOnCanvas.bind(this);\n\t}\n\tdrawOnCanvas(ctx, moreProps) {\n\t\tconst props = helper(this.props, moreProps);\n\t\tdrawOnCanvas(ctx, props);\n\t}\n\trenderSVG(moreProps) {\n\t\tconst props = helper(this.props, moreProps);\n\t\treturn renderSVG(props);\n\t}\n\trender() {\n\t\treturn <GenericChartComponent\n\t\t\tclip={false}\n\t\t\tsvgDraw={this.renderSVG}\n\t\t\tcanvasDraw={this.drawOnCanvas}\n\t\t\tcanvasToDraw={getAxisCanvas}\n\t\t\tdrawOn={[\"pan\"]}\n\t\t/>;\n\t}\n}\n\nPriceCoordinate.propTypes = {\n\tdisplayFormat: PropTypes.func.isRequired,\n\tyAxisPad: PropTypes.number,\n\trectWidth: PropTypes.number,\n\trectHeight: PropTypes.number,\n\torient: PropTypes.oneOf([\"bottom\", \"top\", \"left\", \"right\"]),\n\tat: PropTypes.oneOf([\"bottom\", \"top\", \"left\", \"right\"]),\n\tprice: PropTypes.number,\n\tdx: PropTypes.number,\n\tarrowWidth: PropTypes.number,\n\topacity: PropTypes.number,\n\tlineOpacity: PropTypes.number,\n\tlineStroke: PropTypes.string,\n\tfontFamily: PropTypes.string,\n\tfontSize: PropTypes.number,\n\tfill: PropTypes.oneOfType([\n\t\tPropTypes.string,\n\t\tPropTypes.func,\n\t]),\n\ttextFill: PropTypes.oneOfType([\n\t\tPropTypes.string,\n\t\tPropTypes.func,\n\t]),\n};\n\nPriceCoordinate.defaultProps = {\n\tyAxisPad: 0,\n\trectWidth: 50,\n\trectHeight: 20,\n\torient: \"left\",\n\tat: \"left\",\n\tprice: 0,\n\tdx: 0,\n\tarrowWidth: 0,\n\tfill: \"#BAB8b8\",\n\topacity: 1,\n\tlineOpacity: 0.2,\n\tlineStroke: \"#000000\",\n\tfontFamily: \"Helvetica Neue, Helvetica, Arial, sans-serif\",\n\tfontSize: 13,\n\ttextFill: \"#FFFFFF\",\n};\n\nfunction helper(props, moreProps) {\n\tconst { width } = moreProps;\n\tconst { chartConfig: { yScale } } = moreProps;\n\tconst [lowerYValue, upperYValue] = yScale.domain();\n\n\tconst { price } = props;\n\tconst { orient, at, rectWidth, rectHeight, displayFormat, dx } = props;\n\tconst { fill, opacity, fontFamily, fontSize, textFill, arrowWidth, lineOpacity, lineStroke } = props;\n\n\tconst x1 = 0, x2 = width;\n\tconst edgeAt = (at === \"right\")\n\t\t? width\n\t\t: 0;\n\n\tconst type = \"horizontal\";\n\n\tconst y = yScale(price);\n\tconst show = (price <= upperYValue && price >= lowerYValue);\n\n\tconst coordinate = displayFormat(yScale.invert(y));\n\tconst hideLine = false;\n\n\tconst coordinateProps = {\n\t\tcoordinate,\n\t\tshow,\n\t\ttype,\n\t\torient,\n\t\tedgeAt,\n\t\thideLine,\n\t\tlineOpacity,\n\t\tlineStroke,\n\t\tfill: functor(fill)(price),\n\t\ttextFill: functor(textFill)(price),\n\t\topacity, fontFamily, fontSize,\n\t\trectWidth,\n\t\trectHeight,\n\t\tarrowWidth,\n\t\tdx,\n\t\tx1,\n\t\tx2,\n\t\ty1: y,\n\t\ty2: y,\n\t};\n\treturn coordinateProps;\n}\n\nexport default PriceCoordinate;\n"]}