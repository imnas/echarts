{"version":3,"sources":["../../src/lib/GenericChartComponent.js"],"names":["ALWAYS_TRUE_TYPES","GenericChartComponent","props","context","preCanvasDraw","bind","postCanvasDraw","shouldTypeProceed","preEvaluate","ctx","moreProps","save","margin","ratio","chartConfig","canvasOriginX","origin","left","canvasOriginY","top","width","height","clip","edgeClip","setTransform","scale","beginPath","rect","right","translate","restore","chartConfigList","chartId","each","id","ox","oy","mouseXY","x","y","startPos","type","disablePan","indexOf","currentCharts","propTypes","defaultProps","contextTypes","number","oneOfType","string","isRequired","object"],"mappings":"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","file":"GenericChartComponent.js","sourcesContent":["\"use strict\";\n\nimport PropTypes from \"prop-types\";\nimport GenericComponent from \"./GenericComponent\";\nimport {\n\tisDefined,\n\tfind,\n} from \"./utils\";\n\nconst ALWAYS_TRUE_TYPES = [\n\t\"drag\",\n\t\"dragend\"\n];\n\nclass GenericChartComponent extends GenericComponent {\n\tconstructor(props, context) {\n\t\tsuper(props, context);\n\n\t\tthis.preCanvasDraw = this.preCanvasDraw.bind(this);\n\t\tthis.postCanvasDraw = this.postCanvasDraw.bind(this);\n\t\tthis.shouldTypeProceed = this.shouldTypeProceed.bind(this);\n\t\tthis.preEvaluate = this.preEvaluate.bind(this);\n\t}\n\tpreCanvasDraw(ctx, moreProps) {\n\t\tsuper.preCanvasDraw(ctx, moreProps);\n\t\tctx.save();\n\t\tconst { margin, ratio } = this.context;\n\t\tconst { chartConfig } = moreProps;\n\n\t\tconst canvasOriginX = (0.5 * ratio) + chartConfig.origin[0] + margin.left;\n\t\tconst canvasOriginY = (0.5 * ratio) + chartConfig.origin[1] + margin.top;\n\n\t\tconst { chartConfig: { width, height } } = moreProps;\n\t\tconst { clip, edgeClip } = this.props;\n\n\t\tctx.setTransform(1, 0, 0, 1, 0, 0);\n\t\tctx.scale(ratio, ratio);\n\t\tif (edgeClip) {\n\t\t\tctx.beginPath();\n\t\t\tctx.rect(-1, canvasOriginY - 10, width + margin.left + margin.right + 1, height + 20);\n\t\t\tctx.clip();\n\t\t}\n\n\t\tctx.translate(canvasOriginX, canvasOriginY);\n\n\t\tif (clip) {\n\t\t\tctx.beginPath();\n\t\t\tctx.rect(-1, -1, width + 1, height + 1);\n\t\t\tctx.clip();\n\t\t}\n\t}\n\tpostCanvasDraw(ctx, moreProps) {\n\t\tsuper.postCanvasDraw(ctx, moreProps);\n\t\tctx.restore();\n\t}\n\tupdateMoreProps(moreProps) {\n\t\tsuper.updateMoreProps(moreProps);\n\t\tconst { chartConfig: chartConfigList } = moreProps;\n\n\t\tif (chartConfigList) {\n\t\t\tconst { chartId } = this.context;\n\t\t\tconst chartConfig = find(chartConfigList, each => each.id === chartId);\n\t\t\tthis.moreProps.chartConfig = chartConfig;\n\t\t}\n\t\tif (isDefined(this.moreProps.chartConfig)) {\n\t\t\tconst { origin: [ox, oy] } = this.moreProps.chartConfig;\n\t\t\tif (isDefined(moreProps.mouseXY)) {\n\t\t\t\tconst { mouseXY: [x, y] } = moreProps;\n\t\t\t\tthis.moreProps.mouseXY = [\n\t\t\t\t\tx - ox,\n\t\t\t\t\ty - oy\n\t\t\t\t];\n\t\t\t}\n\t\t\tif (isDefined(moreProps.startPos)) {\n\t\t\t\tconst { startPos: [x, y] } = moreProps;\n\t\t\t\tthis.moreProps.startPos = [\n\t\t\t\t\tx - ox,\n\t\t\t\t\ty - oy\n\t\t\t\t];\n\t\t\t}\n\t\t}\n\t}\n\tpreEvaluate(/* type, moreProps */) {\n\t\t/* if (\n\t\t\ttype === \"mousemove\"\n\t\t\t&& this.props.onMouseMove\n\t\t\t&& isDefined(moreProps)\n\t\t\t&& isDefined(moreProps.currentCharts)\n\t\t) {\n\t\t\tif (moreProps.currentCharts.indexOf(this.context.chartId) === -1) {\n\t\t\t\tmoreProps.show = false;\n\t\t\t}\n\t\t} */\n\t}\n\tshouldTypeProceed(type, moreProps) {\n\t\tif (\n\t\t\t(type === \"mousemove\" || type === \"click\")\n\t\t\t&& this.props.disablePan) {\n\t\t\treturn true;\n\t\t}\n\t\tif (\n\t\t\tALWAYS_TRUE_TYPES.indexOf(type) === -1\n\t\t\t&& isDefined(moreProps)\n\t\t\t&& isDefined(moreProps.currentCharts)\n\t\t) {\n\t\t\treturn (moreProps.currentCharts.indexOf(this.context.chartId) > -1);\n\t\t}\n\t\treturn true;\n\t}\n}\n\nGenericChartComponent.propTypes = GenericComponent.propTypes;\n\nGenericChartComponent.defaultProps = GenericComponent.defaultProps;\n\nGenericChartComponent.contextTypes = {\n\t...GenericComponent.contextTypes,\n\tcanvasOriginX: PropTypes.number,\n\tcanvasOriginY: PropTypes.number,\n\tchartId: PropTypes.oneOfType([PropTypes.number, PropTypes.string]).isRequired,\n\tchartConfig: PropTypes.object.isRequired,\n\tratio: PropTypes.number.isRequired,\n};\n\nexport default GenericChartComponent;\n"]}